<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>PROFASI: Restraining simulations with a torsional angle potential</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="toc.html">Table of contents</a>
  </div>
</div>
<div class="contents">


<h1><a class="anchor" id="dh_restraints">Restraining simulations with a torsional angle potential </a></h1><p>Sometimes we are interested in keeping one of the proteins relatively fixed while allowing the other chains to move around freely. Sometimes we have a good idea about the secondary structure of a certain region of the chain, and want the simulations to not drift away from it too easily, while also not making that region entirely immobile. One way to guide the simulations in such cases is to use an energy penalty for backbone angles which differ from their preferred values. To use such a term in a simulation, you can write the following line in the settings file: </p>
<div class="fragment"><pre class="fragment">
  force_field FF08DR=FF08+Extras:DihedralRestraints(restr_descr.xml)
  </pre></div><p> where  restr_descr.xml is an XML file describing the restraints (see below).</p>
<p>Equivalently, you can specify the use of the restraints in the command line. </p>
<div class="fragment"><pre class="fragment">
  $ BasicMCRun --add_chain_pdb 1 monster.pdb::A -lcyc -1 -ncyc 100000 \
  --force_field "FF08DR=FF08+Extras:DihedralRestraints(restr_descr.xml)"
  </pre></div><p> Notice that quotation marks are needed around the force_field option in the command line.</p>
<p>The above syntax can be used for any ProFASi simulation program.</p>
<h2><a class="anchor" id="specs">
Specification</a></h2>
<p>A dihedral restraints energy term must be configured so that it knows which angles to apply restraints on, and what the restraints look like. This is done using an XML configuration file. This is the format of the XML file:</p>
<ul>
<li>The top level node for this XML configuration file is called  dihedral_restraints . </li>
<li>Within the scope of the top level node, there should be a series of nodes of name  restraint . </li>
<li>Each  restraint node must have a field called  dof_id and a field called  parameters . </li>
<li>The  restraint node can optionally have an attribute  type, specifying the kind of function to be used for the angle. The default function for dihedral restraints is a circular normal form. </li>
<li>The contents of the  parameters field depend on the type of function chosen with the type field. The parameter names for the default function are  mean and  kappa and weight (N).</li>
</ul>
<p>In practice, it would be cumbersome to generate large XML files with such a nested structure. But ProFASi's XML module has a template parsing facility which can be used to do this much more elegantly. Let's say we have generated a long array of "desired" values for the dihedral angles with some notion about the uncertainity (width) associated with each angle. We have a file like this (let's say the file is called  dh_con.table ): </p>
<div class="fragment"><pre class="fragment">
::b:5 2.74191 0.5 10 1 1 2.74191 20
::b:6 -1.81689 0.5 10 1 1 -1.81689 20
::b:7 2.17992 0.5 10 1 1 2.17992 20
::b:8 -1.56731 0.5 10 1 1 -1.56731 20
::b:9 2.62498 0.5 10 1 1 2.62498 20
::b:10 -2.22879 0.5 10 1 1 -2.22879 20
::b:11 1.77849 0.5 10 1 1 1.77849 20
::b:12 -1.39277 0.5 10 1 1 -1.39277 20
::b:13 1.99491 0.5 10 1 1 1.99491 20
::b:14 -1.82772 0.5 10 1 1 -1.82772 20
::b:15 0.678933 0.5 10 1 1 0.678933 20
::b:16 -1.01753 0.5 10 1 1 -1.01753 20
::b:17 2.45219 0.5 10 1 1 2.45219 20
::b:18 -1.22173 0.5 10 1 1 -1.22173 20
::b:19 -0.486947 0.5 10 1 1 -0.486947 20
...
</pre></div><p> The format of the above file is entirely up to you. It does not matter which column you write the DOF identifier string, which column you put the mean etc. But for the discussion, let's say you want column 7 (counting from 1, like in awk) to be the mean, column 8 to be the kappa and column 4 to be the weight, and column 1 to be the DOF identifier string. You then make an XML file with the following contents (restr_descr.xml):</p>
<div class="fragment"><pre class="fragment">
&lt;dihedral_restraints&gt;
  &lt;formatted_data&gt;
    &lt;format name="restraint"&gt;
      &lt;dof_id&gt;$1&lt;/dof_id&gt;
      &lt;parameters&gt;
        &lt;mean&gt;$7&lt;/mean&gt;
        &lt;kappa&gt;$8&lt;/kappa&gt;
        &lt;weight&gt;$4&lt;/weight&gt;
      &lt;/parameters&gt;
    &lt;/format&gt;
    &lt;import_data&gt;dh_con.table&lt;/import_data&gt;
  &lt;/formatted_data&gt;
&lt;/dihedral_restraints&gt;
</pre></div><p>ProFASi will see this XML file as follows: </p>
<div class="fragment"><pre class="fragment">
&lt;dihedral_restraints&gt;
  &lt;restraint&gt;
    &lt;dof_id&gt;::b:5&lt;/dof_id&gt;
    &lt;parameters&gt;
      &lt;mean&gt;2.74191&lt;/mean&gt;
      &lt;kappa&gt;20&lt;/kappa&gt;
      &lt;weight&gt;10&lt;/weight&gt;
    &lt;/parameters&gt;
  &lt;/restraint&gt;
  &lt;restraint&gt;
    &lt;dof_id&gt;::b:6&lt;/dof_id&gt;
    &lt;parameters&gt;
      &lt;mean&gt;-1.81689&lt;/mean&gt;
      &lt;kappa&gt;20&lt;/kappa&gt;
      &lt;weight&gt;10&lt;/weight&gt;
    &lt;/parameters&gt;
  &lt;/restraint&gt;
  &lt;restraint&gt;
    &lt;dof_id&gt;::b:7&lt;/dof_id&gt;
    &lt;parameters&gt;
      &lt;mean&gt;2.17992&lt;/mean&gt;
      &lt;kappa&gt;20&lt;/kappa&gt;
      &lt;weight&gt;10&lt;/weight&gt;
    &lt;/parameters&gt;
  &lt;/restraint&gt;
  ...
&lt;/dihedral_restraints&gt;
</pre></div><p> We did not specify a distribution type, so the von Mises or circular normal form will be assumed for every restraint. The parameters are as found in the  parameters node. </p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="ds_restraints.html">Simulations with distance restraints</a> </dd></dl>
</div>
<center>
<hr>
<small>
<strong>PROFASI: Protein Folding and Aggregation Simulator, Version 1.5 
</strong><br />
&copy; (2005-2009) <a href="http://www.thep.lu.se/~anders">Anders Irb&auml;ck</a>
and <a href="http://www.thep.lu.se/~sandipan">Sandipan Mohanty</a><br />
Documentation generated on 19 Jun 2014 using Doxygen version 1.6.1
</small>
</center>

</body>
</html> 
