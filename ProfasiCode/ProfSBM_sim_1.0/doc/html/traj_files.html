<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>PROFASI: PROFASI trajectory files</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="toc.html">Table of contents</a>
  </div>
</div>
<div class="contents">


<h1><a class="anchor" id="traj_files">PROFASI trajectory files </a></h1><p>A "trajectory" in PROFASI is a sequence of snapshots stored at regular intervals during a Monte Carlo run. Trajectory files are generated by PROFASI simulation programs such as <a class="el" href="classBasicMCRun.html" title="Constant temperature Monte Carlo simulations.">BasicMCRun</a>, <a class="el" href="classSimTempRun.html" title="Simulated tempering with profasi.">SimTempRun</a> and <a class="el" href="classParTempRun.html" title="Parallel tempering class.">ParTempRun</a>.</p>
<h2><a class="anchor" id="intro">
Multi-segment trajectories</a></h2>
<p>On modern computing systems, the run time for a single job is normally limited, quite often to one or a few days. This is not enough for a production run of a decent protein system. So, one needs several restarts. This is how PROFASI handles such multi-part runs:</p>
<p>When you start a run, tell the program how much time it has. For instance, if you request 24 hours for a parallel job on 64 cores from a PBS queue manager, put the following line in the PROFASI settings file for the job: </p>
<div class="fragment"><pre class="fragment">
    available_time 23:45:0
    </pre></div><p>A lot of things need to be saved when the job ends. So, it is normally better to leave a bit of time at the end of job: if you have 24 hours, tell PROFASI that you have 23 hours 45 minutes. If the job is not finished when the available time expires, the simulation "suspends". To restart from where it left, just start the same job again in the same directory. PROFASI detects that there was an unfinished run and continues the run instead of starting a new one. Imagine you had to restart a run 17 times to finish 10 million MC sweeps for a system. These 18 stages of the run will be called segments.</p>
<ul>
<li>Each segment of the run creates a new data file to save snapshots during that run </li>
<li>The segment files contain headers with information about the layout of the data in them and about the machine where that segment of the simulation was made. </li>
<li>A meta-data file called "traj" is created when a run starts for the first time. The "traj" file contains the names of the segment files which make up the trajectory. It also contains the starting MC cycle, interval between successive writes to the trajectory and the total number of snapshots in each segment. </li>
<li>In case a run "resumes" from the middle of a previous run and traces a different trajectory, the original trajectory file is backed up and a new one started containing the part of the older trajectory prior to the restart point. Only a new meta data file is created. The two "traj" files share the data files of the common segments. </li>
<li>Different segments can run on different machines with different architectures. While browsing a trajectory, this detail is not visible.</li>
</ul>
<p>To extract a particular snapshot with the <a class="el" href="classextract__snapshot.html" title="Extracting a snapshot configuration.">extract_snapshot</a> program or analyze properties of the trajectory with the <a class="el" href="classextract__props.html" title="Calculating run-time properties from traj files.">extract_props</a> program, the "traj" files are used as input. But the "traj" files alone are useless since they don't contain the actual data. </p>
<div style="color:red"> It is not enough to copy the tiny "traj" files back from the cluster or supercomputer running the simulations. All conf.data... files must be copied.</div><p>The <a class="el" href="classprf__traj_1_1Trajectory.html" title="PROFASI (multi-segment) trajectories.">prf_traj::Trajectory</a> class parses the "traj" files and provides an interface as if it was one smooth series of snapshots. Only one file handle is kept open corresponding to the segment of the snapshot last accessed. This is called the "active" segment. If access is attempted to a snapshot on a different segment of the run than the active segment, the active segment is closed, and the necessary segment is opened and the correct snapshot returned. To the outside function, all these details are hidden. They iterate over the trajectory and access elements when they want to. </p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="group__prf__trajectory.html">PROFASI trajectory module</a>, <a class="el" href="classextract__snapshot.html" title="Extracting a snapshot configuration.">extract_snapshot</a>, <a class="el" href="classextract__props.html" title="Calculating run-time properties from traj files.">extract_props</a>, <a class="el" href="traj_gen.html">Generating trajectory files</a> </dd></dl>
</div>
<center>
<hr>
<small>
<strong>PROFASI: Protein Folding and Aggregation Simulator, Version 1.5 
</strong><br />
&copy; (2005-2009) <a href="http://www.thep.lu.se/~anders">Anders Irb&auml;ck</a>
and <a href="http://www.thep.lu.se/~sandipan">Sandipan Mohanty</a><br />
Documentation generated on 19 Jun 2014 using Doxygen version 1.6.1
</small>
</center>

</body>
</html> 
