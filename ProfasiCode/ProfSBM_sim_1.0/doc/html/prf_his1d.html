<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>PROFASI: Creating PROFASI style histograms with prf_his1d</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="toc.html">Table of contents</a>
  </div>
</div>
<div class="contents">


<h1><a class="anchor" id="prf_his1d">Creating PROFASI style histograms with prf_his1d </a></h1><p>You have a data file with hundreds of thousands of lines and tens of columns, and you want to look at the distribution of the data in the 13th column. prf_his1d is a convenient tool to make such a histogram. You need to use UNIX commands "awk" or "cut" to extract the relevant column, and pipe it to prf_his1d like this:<br/>
<br/>
</p>
<p>awk '{print $13;}' the_datafile | prf_his1d -r -30 55 -nb 100 -o output.his <br/>
<br/>
</p>
<p>The available options are :<br/>
<br/>
</p>
<ul>
<li><b>"output_file" or "o"</b> </li>
<li><b> "range" or "r" </b>: takes two numeric arguments e.g. "-r 1 4.5" </li>
<li><b>"number_of_bins" or "nb"</b>: takes one integer argument </li>
<li><b>"normalization_mode" or "nm"</b>: choose a normalisation mode for the histogram. possible values: 0, 1 or 2 </li>
<li><b>"layout" or "l"</b>: Use this option to store data in the old PROFASI 1.1 histogram format. For explanation of data layouts and normalisation modes please refer to the documentation of <a class="el" href="classprf__utils_1_1His1D.html" title="The default histogram utility in ProFASi is based on His1D.">prf_utils::His1D</a> </li>
<li><b>"no_adjust" or "na"</b>: histogram will not adjust range according to the data </li>
<li><b>"adjust_interval" or "ai"</b> : takes one integer argument, which gives the number of data points to be processed before each range adjustment </li>
<li><b>"number_of_blocks" or "nk"</b>: takes one integer argument, the number of blocks in the histogram (See below for explanation)</li>
</ul>
<p>The program simply takes the data from the standard input and puts them in a histogram with the specified range (-r -30 55) and number of bins(-nb 100). If the data falls outside the specified range, by default, the histogram will try to adjust its range to fit the data, without losing information. This is a property of PROFASI's self adjusting histograms. With the option "--no_adjust
  or -na" this feature is turned off. Even if you want to use the self adjust feature, try to provide at least a sensible range in the range option. This is used to set the bin size, which is not changed while adjusting the histogram range later.<br/>
<br/>
</p>
<p>Suppose you have stored some sort of integer identifier in the 2 column, that labels the line of data in some way. In PROFASI run time history files, you have the temperature index written in the second column. You might be interested in the histogram of energy for temperature index 4. You can do that exactly as before by using a conditional in "awk".<br/>
<br/>
</p>
<p>awk '{if ($2==4) print $3;}' n* /rt | prf_his1d -r 10 60 -nb 100 -o etot.his <br/>
<br/>
</p>
<p>But then you might also need to get the histogram for temperature index 0,1,2... ! A new file and a new command for every index is unnecessary. PROFASI histograms can store, in one file, information about the same kind of data categorized by some integer index. The right way to make a single output file containing histograms of column 3 partitioned by column 2 is : <br/>
<br/>
</p>
<p>awk '{print $2,$3;}' n* /rt | prf_his1d -nk 16 -o etot.his -r 10 60 -nb 100 <br/>
<br/>
</p>
<p>The option "-nk" used in the above example changes how the incoming data stream is interpreted. First, the data is now assumed to be in two columns. The first column is supposed to be an integer index, whereas the second column is the data to be put in the histograms. The value "16" passed to the "-nk" option instructs the program to create 16 blocks for the histogram, i.e., that the integer index will vary from 0 to 15. The data lines in which the integer index is 3 will be stored in the 3rd block of the histogram, index 4 ==&gt; block 4 etc. The resulting histogram file will contain many columns. The first column is the x bins. The subsequent columns will be the histogram values (frequencies, probabilities ...) for the different integer indexes. You can change the layout of the histogram to PROFASI 1.1 histogram layout by using the "--layout or -l 1" option.</p>
<p>Although we used the total energy in the above examples, if you are interested in that histogram, it is much better to use the histograms generated during the runs, like n0/his_Etot etc. This program is intended to be used in situations where such a histogram file is not available. </p>
</div>
<center>
<hr>
<small>
<strong>PROFASI: Protein Folding and Aggregation Simulator, Version 1.5 
</strong><br />
&copy; (2005-2009) <a href="http://www.thep.lu.se/~anders">Anders Irb&auml;ck</a>
and <a href="http://www.thep.lu.se/~sandipan">Sandipan Mohanty</a><br />
Documentation generated on 19 Jun 2014 using Doxygen version 1.6.1
</small>
</center>

</body>
</html> 
