<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>PROFASI: prf_utils::AdaptiveHis Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="namespaceprf__utils.html">prf_utils</a>::<a class="el" href="classprf__utils_1_1AdaptiveHis.html">AdaptiveHis</a>
  </div>
</div>
<div class="contents">
<h1>prf_utils::AdaptiveHis Class Reference<br/>
<small>
[<a class="el" href="group__utilities.html">Utilities</a>]</small>
</h1><!-- doxytag: class="prf_utils::AdaptiveHis" --><!-- doxytag: inherits="prf_utils::His1D" -->
<p>A histogram that can adjust its own range according to the data.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;AdaptiveHis.hh&gt;</code></p>

<p>Inherits <a class="el" href="classprf__utils_1_1His1D.html">prf_utils::His1D</a>.</p>

<p><a href="classprf__utils_1_1AdaptiveHis-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a46112b355a78c175b4d911491928f2e9"></a><!-- doxytag: member="prf_utils::AdaptiveHis::AdaptiveHis" ref="a46112b355a78c175b4d911491928f2e9" args="()" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprf__utils_1_1AdaptiveHis.html#a46112b355a78c175b4d911491928f2e9">AdaptiveHis</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Default constructor. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9e20ea4237bfddc6192f99aec0fa7eae"></a><!-- doxytag: member="prf_utils::AdaptiveHis::AdaptiveHis" ref="a9e20ea4237bfddc6192f99aec0fa7eae" args="(const AdaptiveHis &amp;)" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprf__utils_1_1AdaptiveHis.html#a9e20ea4237bfddc6192f99aec0fa7eae">AdaptiveHis</a> (const <a class="el" href="classprf__utils_1_1AdaptiveHis.html">AdaptiveHis</a> &amp;)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Copy constructor. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classprf__utils_1_1AdaptiveHis.html">AdaptiveHis</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprf__utils_1_1AdaptiveHis.html#a5378c2bbac826c029438eeef9e6d27ca">operator=</a> (const <a class="el" href="classprf__utils_1_1AdaptiveHis.html">AdaptiveHis</a> &amp;)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Assignment operator.  <a href="#a5378c2bbac826c029438eeef9e6d27ca"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac9985339d4aec1196f1fd44cb1e19bdb"></a><!-- doxytag: member="prf_utils::AdaptiveHis::init" ref="ac9985339d4aec1196f1fd44cb1e19bdb" args="()" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprf__utils_1_1AdaptiveHis.html#ac9985339d4aec1196f1fd44cb1e19bdb">init</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initializes using info about range etc. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af3325026c397d1542754d8b92efcafeb"></a><!-- doxytag: member="prf_utils::AdaptiveHis::reset" ref="af3325026c397d1542754d8b92efcafeb" args="()" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprf__utils_1_1AdaptiveHis.html#af3325026c397d1542754d8b92efcafeb">reset</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Reset all data (init calls this). <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprf__utils_1_1AdaptiveHis.html#ab219d6e8e03ec57d88351531d8579a55">adjust</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Adjust range to accommodate data, keeping bin size fixed.  <a href="#ab219d6e8e03ec57d88351531d8579a55"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprf__utils_1_1AdaptiveHis.html#a23e258910c3514aea8603d014f98be28">put</a> (double x, int i=0)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Put a value into the histogram.  <a href="#a23e258910c3514aea8603d014f98be28"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad94ab968a938fd0c76b2dbdc7e69d4b1"></a><!-- doxytag: member="prf_utils::AdaptiveHis::nput" ref="ad94ab968a938fd0c76b2dbdc7e69d4b1" args="(double howmanytimes, double x, int iblk)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprf__utils_1_1AdaptiveHis.html#ad94ab968a938fd0c76b2dbdc7e69d4b1">nput</a> (double howmanytimes, double x, int iblk)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">put n indentical values at once <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abaebb416d9a361ef83030a0cfd1da64e"></a><!-- doxytag: member="prf_utils::AdaptiveHis::operator+=" ref="abaebb416d9a361ef83030a0cfd1da64e" args="(AdaptiveHis &amp;hs)" -->
<a class="el" href="classprf__utils_1_1AdaptiveHis.html">AdaptiveHis</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprf__utils_1_1AdaptiveHis.html#abaebb416d9a361ef83030a0cfd1da64e">operator+=</a> (<a class="el" href="classprf__utils_1_1AdaptiveHis.html">AdaptiveHis</a> &amp;hs)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Add information from another given histogram. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprf__utils_1_1AdaptiveHis.html#aaac1edc9b1f9c1c86b03afb8d9521d21">Export</a> (const char *filename, int normmode=2, int lyout=2)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Save histogram and out of range points to files.  <a href="#aaac1edc9b1f9c1c86b03afb8d9521d21"></a><br/></td></tr>
<tr><td colspan="2"><div class="groupHeader"></div></td></tr>
<tr><td colspan="2"><div class="groupText"><p><a class="anchor" id="amgrpd41d8cd98f00b204e9800998ecf8427e"></a> </p>
<br/><br/></div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprf__utils_1_1AdaptiveHis.html#af0536e41ec8ed9f11bb2052041e69540">disable_adjust</a> ()</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>This is a minor modification of the <a class="el" href="classprf__utils_1_1His1D.html" title="The default histogram utility in ProFASi is based on His1D.">His1D</a> class that frees the user from estimating a good range for a histogram before starting to fill it. When one starts a Monte Carlo run with a new protein, or in any other application where a histogram may be required, one has often no idea where the values of one measurement might lie. Before version 1.1 of PROFASI, one had to first make a trial run to get a good feeling for the true range of the data, and then start new production runs where the correct histogram ranges were specified. To a large extent, this will now be unnecessary.</p>
<p>This histogram follows the data, wherever it is. You just have to declare an <a class="el" href="classprf__utils_1_1AdaptiveHis.html" title="A histogram that can adjust its own range according to the data.">AdaptiveHis</a>, fill it with data, ask it to "adjust()" once in a while, and Export() it to a file. If you then plot the file, it will have a very reasonable range: not too many empty bins on left and right. Not too many missed data points.</p>
<p>This does not mean that one does not need to think about the size of the values put into the histograms at all. The <a class="el" href="classprf__utils_1_1AdaptiveHis.html#ab219d6e8e03ec57d88351531d8579a55" title="Adjust range to accommodate data, keeping bin size fixed.">adjust()</a> function does not change the size of the bins used for the histogram. That's how it works! If there are many points outside the current range, the class remembers those missed points. When statistics is collected we pretend that there were an infinite number of bins of the size set at initialization. We only choose to do the book keeping on a finite range of those bins. If there are points outside our currently tracked bins, we can add a few bins to the left or right to accommodate them, without affecting the collected data at all. If we were to change the bin size during an adjustment, that would interfere with the data collected before <a class="el" href="classprf__utils_1_1AdaptiveHis.html#ab219d6e8e03ec57d88351531d8579a55" title="Adjust range to accommodate data, keeping bin size fixed.">adjust()</a> was called.</p>
<p>So, an initial guess for the size of the data is useful. More precisely a good initial estimate of the size of the bins is useful. If the minimum or maximum ranges are wrong, this class will take care of it. If your data values range from 3000 to 10000 and you initialize your <a class="el" href="classprf__utils_1_1AdaptiveHis.html" title="A histogram that can adjust its own range according to the data.">AdaptiveHis</a> to a range 0 to 1 with 100 bins, The adjust function will result in a huge histogram. It will have a range 3000 to 10000, with 700000 bins. But if you initialize it to 2000 to 4000 with 50 bins, you will be fine. It will once again find the correct range, but will have less than 200 bins.</p>
<p>This class was introduced in version 1.1. It is possible that in the future, its functionality will be absorbed in <a class="el" href="classprf__utils_1_1His1D.html" title="The default histogram utility in ProFASi is based on His1D.">His1D</a>. </p>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="ab219d6e8e03ec57d88351531d8579a55"></a><!-- doxytag: member="prf_utils::AdaptiveHis::adjust" ref="ab219d6e8e03ec57d88351531d8579a55" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int prf_utils::AdaptiveHis::adjust </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Appropriate range for the data is found by examining out of range points, and the occupancy of currently used bins. We add bins, only if we can fill them. The fundamental reason for the existance of any kind of histograms is that one does not wish to save each and every data point. "Similar" data points are groupped, or binned together. Now if there is one data point outside the current range, such that we would need add 100 bins to the right to reach that datapoint, the use of the histogram itself loses its meaning, if we do that. It is more economical to save that data point than to create 100 more bins and remember the frequency of each. Therefore, even after repeated calls to adjust, there might be one remaining out-of-range point that this class simply refuses to cover. When the histogram is saved, such points, if any, are saved in a separate file, and you can deal with them if you like.</p>
<p>Return value is non-zero if the range really changes. </p>

</div>
</div>
<a class="anchor" id="af0536e41ec8ed9f11bb2052041e69540"></a><!-- doxytag: member="prf_utils::AdaptiveHis::disable_adjust" ref="af0536e41ec8ed9f11bb2052041e69540" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void prf_utils::AdaptiveHis::disable_adjust </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Disable/enable range tracking features. One can temporarily disable the "adaptive" qualities of the histogram. This is intended for use, if it is known that the incomming data for a certain stage of the program can contain non-sensical values which should have no bearing on the range. When "adjustability" is disabled, the histogram forgets new out of range values, until it is re-enabled. </p>

</div>
</div>
<a class="anchor" id="aaac1edc9b1f9c1c86b03afb8d9521d21"></a><!-- doxytag: member="prf_utils::AdaptiveHis::Export" ref="aaac1edc9b1f9c1c86b03afb8d9521d21" args="(const char *filename, int normmode=2, int lyout=2)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void prf_utils::AdaptiveHis::Export </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>normmode</em> = <code>2</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>lyout</em> = <code>2</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The histogram data is saved as in class <a class="el" href="classprf__utils_1_1His1D.html" title="The default histogram utility in ProFASi is based on His1D.">His1D</a>. The parameters normmode and lyout are simply passed down to the base class function. But this class also saves the out-of-range points not covered by the final range(those the function <a class="el" href="classprf__utils_1_1AdaptiveHis.html#ab219d6e8e03ec57d88351531d8579a55" title="Adjust range to accommodate data, keeping bin size fixed.">adjust()</a> refuses to include), in a second file with the same name as the histogram file, but with an extension ".out_of_range" at the end. </p>

<p>Reimplemented from <a class="el" href="classprf__utils_1_1His1D.html#a90ec7fae4c27a10ff4324e27bcaf9678">prf_utils::His1D</a>.</p>

</div>
</div>
<a class="anchor" id="a5378c2bbac826c029438eeef9e6d27ca"></a><!-- doxytag: member="prf_utils::AdaptiveHis::operator=" ref="a5378c2bbac826c029438eeef9e6d27ca" args="(const AdaptiveHis &amp;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classprf__utils_1_1AdaptiveHis.html">AdaptiveHis</a> &amp; prf_utils::AdaptiveHis::operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classprf__utils_1_1AdaptiveHis.html">AdaptiveHis</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>hs</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>It copies data, do not initialize after this! </p>

<p>Reimplemented from <a class="el" href="classprf__utils_1_1His1D.html#a5b09c6d9d3be29ebeef6ffd24318abaf">prf_utils::His1D</a>.</p>

</div>
</div>
<a class="anchor" id="a23e258910c3514aea8603d014f98be28"></a><!-- doxytag: member="prf_utils::AdaptiveHis::put" ref="a23e258910c3514aea8603d014f98be28" args="(double x, int i=0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int prf_utils::AdaptiveHis::put </td>
          <td>(</td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>i</em> = <code>0</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The value x is put into the histogram if it fits in the range. If not, it is stored in the out-of-range list. The adjust function deals with these out of range points and may put them into bins when the range is appropriately extended. </p>

<p>Reimplemented from <a class="el" href="classprf__utils_1_1His1D.html#a7909d5fa10d3af08670aebe0c8fa5cf1">prf_utils::His1D</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>model/Aux/AdaptiveHis.hh</li>
<li>model/Aux/AdaptiveHis.cc</li>
</ul>
</div>
<center>
<hr>
<small>
<strong>PROFASI: Protein Folding and Aggregation Simulator, Version 1.5 
</strong><br />
&copy; (2005-2009) <a href="http://www.thep.lu.se/~anders">Anders Irb&auml;ck</a>
and <a href="http://www.thep.lu.se/~sandipan">Sandipan Mohanty</a><br />
Documentation generated on 19 Jun 2014 using Doxygen version 1.6.1
</small>
</center>

</body>
</html> 
