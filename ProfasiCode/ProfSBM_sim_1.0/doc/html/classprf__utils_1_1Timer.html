<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>PROFASI: prf_utils::Timer Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="namespaceprf__utils.html">prf_utils</a>::<a class="el" href="classprf__utils_1_1Timer.html">Timer</a>
  </div>
</div>
<div class="contents">
<h1>prf_utils::Timer Class Reference<br/>
<small>
[<a class="el" href="group__utilities.html">Utilities</a>]</small>
</h1><!-- doxytag: class="prf_utils::Timer" -->
<p>ProFASi's own timer for managing time limited runs.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;Timer.hh&gt;</code></p>

<p><a href="classprf__utils_1_1Timer-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Public Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprf__utils_1_1Timer.html#a77f93e31700378ab6790a50a572d45f2">recommendation_type</a> </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><p><a class="el" href="classprf__utils_1_1Timer.html" title="ProFASi&#39;s own timer for managing time limited runs.">Timer</a> recommendation type. </p>
<br/></td></tr>
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a095f7f1e154a3a4c42f6e2a18fc40b60"></a><!-- doxytag: member="prf_utils::Timer::Timer" ref="a095f7f1e154a3a4c42f6e2a18fc40b60" args="()" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprf__utils_1_1Timer.html#a095f7f1e154a3a4c42f6e2a18fc40b60">Timer</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Default constructor. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8875df7d12081189ac8440d1d8183d1a"></a><!-- doxytag: member="prf_utils::Timer::Start" ref="a8875df7d12081189ac8440d1d8183d1a" args="(unsigned long startpos=0)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprf__utils_1_1Timer.html#a8875df7d12081189ac8440d1d8183d1a">Start</a> (unsigned long startpos=0)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Start the stop-watch. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af55e3a2488257a5ca31124d750beeb2e"></a><!-- doxytag: member="prf_utils::Timer::Stop" ref="af55e3a2488257a5ca31124d750beeb2e" args="(unsigned long endpos=0)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprf__utils_1_1Timer.html#af55e3a2488257a5ca31124d750beeb2e">Stop</a> (unsigned long endpos=0)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Stop the stop-watch. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a716ecaca2fab4a5228d631bc2d85f024"></a><!-- doxytag: member="prf_utils::Timer::Reset" ref="a716ecaca2fab4a5228d631bc2d85f024" args="()" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprf__utils_1_1Timer.html#a716ecaca2fab4a5228d631bc2d85f024">Reset</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Reset the stop-watch. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0faac0ce6e4fdb7b92166da5f5f892c8"></a><!-- doxytag: member="prf_utils::Timer::Measurement" ref="a0faac0ce6e4fdb7b92166da5f5f892c8" args="()" -->
double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprf__utils_1_1Timer.html#a0faac0ce6e4fdb7b92166da5f5f892c8">Measurement</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Interval since the start or the last reset in seconds. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a68580f46ca28991dd252e09532062fdd"></a><!-- doxytag: member="prf_utils::Timer::PrintInterval" ref="a68580f46ca28991dd252e09532062fdd" args="()" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprf__utils_1_1Timer.html#a68580f46ca28991dd252e09532062fdd">PrintInterval</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Print interval between start and stop in hours, minutes, seconds etc. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprf__utils_1_1Timer.html#a9a900d7bc17a29b93e62b148b11428c1">space_axis_name</a> (std::string nam)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A name for what is changing with time.  <a href="#a9a900d7bc17a29b93e62b148b11428c1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="adf4f06c87f71b3929f5f0c38b1391646"></a><!-- doxytag: member="prf_utils::Timer::set_new_goal" ref="adf4f06c87f71b3929f5f0c38b1391646" args="(unsigned long newgoal)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprf__utils_1_1Timer.html#adf4f06c87f71b3929f5f0c38b1391646">set_new_goal</a> (unsigned long newgoal)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set a new target to be reached. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a268580cb398b3c975867b9049cefb56b"></a><!-- doxytag: member="prf_utils::Timer::set_current_progress" ref="a268580cb398b3c975867b9049cefb56b" args="(unsigned long progr)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprf__utils_1_1Timer.html#a268580cb398b3c975867b9049cefb56b">set_current_progress</a> (unsigned long progr)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Tell the timer how much progress has been made. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprf__utils_1_1Timer.html#afaed55cfb35b646069e8b6b273697c0f">have_endless_time</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Tell the timer that we have infinite time for the task.  <a href="#afaed55cfb35b646069e8b6b273697c0f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8f8d8cb8ab59f9364522f35a117f8165"></a><!-- doxytag: member="prf_utils::Timer::allocate_time" ref="a8f8d8cb8ab59f9364522f35a117f8165" args="(double dur)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprf__utils_1_1Timer.html#a8f8d8cb8ab59f9364522f35a117f8165">allocate_time</a> (double dur)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Tell the timer how much time is available for the task. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="acbfd59b1df7caf2eef81e5f74c3f4eef"></a><!-- doxytag: member="prf_utils::Timer::flush_timing_data" ref="acbfd59b1df7caf2eef81e5f74c3f4eef" args="(const char *timefile)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprf__utils_1_1Timer.html#acbfd59b1df7caf2eef81e5f74c3f4eef">flush_timing_data</a> (const char *timefile)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Write data about how much time was spent in different stages of the task. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae54dacc67aa200e92c883dc098bd4b8f"></a><!-- doxytag: member="prf_utils::Timer::n_progress_reports" ref="ae54dacc67aa200e92c883dc098bd4b8f" args="(int ntpt)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprf__utils_1_1Timer.html#ae54dacc67aa200e92c883dc098bd4b8f">n_progress_reports</a> (int ntpt)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set how often the timer should talk about the progress made, time left etc. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprf__utils_1_1Timer.html#a8c16ac5e1deac0c64fe9f3b029eed5c3">record</a> (unsigned long progr)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Record progress at intervals of progress.  <a href="#a8c16ac5e1deac0c64fe9f3b029eed5c3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprf__utils_1_1Timer.html#a832dfe6b1b758a620f25d13de8a44e5e">forecast</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Calculate how much more time is needed for the job etc.  <a href="#a832dfe6b1b758a620f25d13de8a44e5e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a683b2881ae81295eca9eaad81e806f6a"></a><!-- doxytag: member="prf_utils::Timer::recommendation" ref="a683b2881ae81295eca9eaad81e806f6a" args="()" -->
<a class="el" href="classprf__utils_1_1Timer.html#a77f93e31700378ab6790a50a572d45f2">recommendation_type</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprf__utils_1_1Timer.html#a683b2881ae81295eca9eaad81e806f6a">recommendation</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Ask the timer, if the application should continue or stop. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af4276e8f359636b4a0200804fcd13251"></a><!-- doxytag: member="prf_utils::Timer::goal_reached" ref="af4276e8f359636b4a0200804fcd13251" args="()" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprf__utils_1_1Timer.html#af4276e8f359636b4a0200804fcd13251">goal_reached</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Has the goal been reached ? <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprf__utils_1_1Timer.html#a66f8dd56463df2e3d352e31029defcef">abandon</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Tell the timer that we are not going any further.  <a href="#a66f8dd56463df2e3d352e31029defcef"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Meaningful simulations of interesting protein systems take a long time. Even with the simplified force field and optimized code of ProFASi, a run might require weeks of computing time. But on large computing facilities, there are limits to how long a single job can run, let's say 12 hours.</p>
<p>ProFASi's simulation programs, such as <a class="el" href="classParTempRun.html" title="Parallel tempering class.">ParTempRun</a> or <a class="el" href="classSimTempRun.html" title="Simulated tempering with profasi.">SimTempRun</a> make use of this timer class to cleanly suspend an on going run when the allocated time is about to finish. The runs are started with a certain amount of "available time", passed to the programs through the settings file or the command line arguments. The timer measures how fast the program is going about its task. It estimates how far it can go in the available time. If it estimates that it will not come back to the next "check point" (configuration save) before the allocated time is up and the run is killed by the system, it recommends that the simulation program "suspends". </p>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a66f8dd56463df2e3d352e31029defcef"></a><!-- doxytag: member="prf_utils::Timer::abandon" ref="a66f8dd56463df2e3d352e31029defcef" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void prf_utils::Timer::abandon </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Sometimes, although we expect it would take 1 billion MC cycles to do something, the simulation program might decide that enough is enough, and we have found a converged answer. It would then abandon the mission of reaching the 1 billion cycles. If it tells the timer that the mission is abandonned, the timer prints a more fitting closing message. </p>

</div>
</div>
<a class="anchor" id="a832dfe6b1b758a620f25d13de8a44e5e"></a><!-- doxytag: member="prf_utils::Timer::forecast" ref="a832dfe6b1b758a620f25d13de8a44e5e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void prf_utils::Timer::forecast </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This function calculates, how much more time is needed for the job, and if the job can not be completed in the remaining available time, how much more work can be expected to be done in the remaining time. </p>

</div>
</div>
<a class="anchor" id="afaed55cfb35b646069e8b6b273697c0f"></a><!-- doxytag: member="prf_utils::Timer::have_endless_time" ref="afaed55cfb35b646069e8b6b273697c0f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void prf_utils::Timer::have_endless_time </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>If there is unlimited available time for the task, the timer does not calculate whether or not the job should be suspended. It merely reports how much longer the job might take, when asked. </p>

</div>
</div>
<a class="anchor" id="a8c16ac5e1deac0c64fe9f3b029eed5c3"></a><!-- doxytag: member="prf_utils::Timer::record" ref="a8c16ac5e1deac0c64fe9f3b029eed5c3" args="(unsigned long progr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void prf_utils::Timer::record </td>
          <td>(</td>
          <td class="paramtype">unsigned long&nbsp;</td>
          <td class="paramname"> <em>progr</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>At regular intervals during the execution of the task, this function should be called with a value indicating how much of the task has been accomplished. The timer has no way of knowing how many MC cycles have been finished or how many km have been travelled. But the application can every once in a while tell the timer what has happened. The timer will associate a time with that, and use the information to calculate what might happen in the remaining available time. </p>

</div>
</div>
<a class="anchor" id="a9a900d7bc17a29b93e62b148b11428c1"></a><!-- doxytag: member="prf_utils::Timer::space_axis_name" ref="a9a900d7bc17a29b93e62b148b11428c1" args="(std::string nam)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void prf_utils::Timer::space_axis_name </td>
          <td>(</td>
          <td class="paramtype">std::string&nbsp;</td>
          <td class="paramname"> <em>nam</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>If we are going somewhere, we might estimate how far we have come and how much of the journey remains in kilometres. For an MC simulation, the progress is measured in MC cycles. This function puts a label on the space axis. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>model/Aux/Timer.hh</li>
<li>model/Aux/Timer.cc</li>
</ul>
</div>
<center>
<hr>
<small>
<strong>PROFASI: Protein Folding and Aggregation Simulator, Version 1.5 
</strong><br />
&copy; (2005-2009) <a href="http://www.thep.lu.se/~anders">Anders Irb&auml;ck</a>
and <a href="http://www.thep.lu.se/~sandipan">Sandipan Mohanty</a><br />
Documentation generated on 19 Jun 2014 using Doxygen version 1.6.1
</small>
</center>

</body>
</html> 
