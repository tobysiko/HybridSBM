<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>PROFASI: extract_props Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>extract_props Class Reference</h1><!-- doxytag: class="extract_props" -->
<p>Calculating run-time properties from traj files.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;extract_props.hh&gt;</code></p>

<p><a href="classextract__props-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>This program works with a traj file generated during a run to calculate values of various observables at the points where configurations were saved during the run. In other words, it can regenerate the rt file if the frequency of writing into that file is the same as the frequency of writing configuration snapshots. It is useful, if, for instance, we want to find the value of a new measurable quantity at all the points along a run-time history. The program simply reads the traj file, sequencially restores the population to each of the configurations saved during the run (within a range, if specified), and calculates any observables as specified.</p>
<p>PROFASI "traj" files are meta-data files containing information about how to find configuration snapshots at different MC cycles during a run. They don't contain the actual data on the state of the population during the run. The data is stored in binary format in a bunch of "conf..." files in the same directory as the traj file.</p>
<p>In its present form, this program has two intended uses.</p>
<ul>
<li>To reconstruct a run-time history file, rt, from a traj file and instructions in the settings file. Imagine the situation that you did not have the NativenessQ observable in the settings file when you started a run. While analysing data, you realize it might be interesting and want to see how it correlates with different energy terms. You can do that if you had the variable printed in the rt file, but since it was not in the settings file when the run started, it will be absent from the rt file. With this program, you can reconstruct a new rt file (give it a different name), with the additional measurement (See "Usage" below).</li>
</ul>
<ul>
<li>Retrieve a series of PDB snapshots in a certain range of Monte Carlo cycles. This is mostly useful for creating animations. We warn that Monte Carlo "time" evolution should not be carelessly interpreted as "time" evolution. But still, an animation is a good way to visualize what was happening in a simulation.</li>
</ul>
<h2><a class="anchor" id="syntax">
Syntax</a></h2>
<p><a class="el" href="classextract__props.html" title="Calculating run-time properties from traj files.">extract_props</a> [OPTIONS] traj_file <br/>
 <br/>
 where, [OPTIONS] could be one or more of:</p>
<ul>
<li><b>--get_pdbs</b> or <b>-pdb</b> Retrieve snapshot PDB files in a specified range </li>
<li><b>--single_file</b> or <b>-sf</b> Store snapshots from different stored configurations as different models in a single PDB file, instead of one file per structure. </li>
<li><b>--get_rt</b> or <b>-rt</b> Reconstruct run-time system properties in a range </li>
<li><b>--get_averages</b> or <b>-avg</b> Generate averages file and profile data </li>
<li><b>--output_prefix</b> or <b>-op</b> Needs an argument specifying what should be prefixed to the output file names. For instance, if you are generating pdb files, they will be named frame_1.pdb, frame_2.pdb etc. But with this option, you can give it a prefix to attach to the filenames. If you pass "-op traj3_" to the program, the PDB filenames will be traj3_frame_1.pdb, traj3_frame_2.pdb etc. "-op d0/" will try to write to output pdb files called d0/frame_1.pdb, d0/frame_2.pdb etc, which means the directory d0 should exist. </li>
<li><b>--start</b> or <b>-a</b> The cycle number to start at. </li>
<li><b>--end</b> or <b>-z</b> The cycle number (inclusive) to end at. </li>
<li><b>--every</b> or <b>-ev</b> Use every n'th snapshot </li>
<li><b>--number_of_temperatures</b> or <b>-nt</b> In some situations this program needs to know the total number of temperatures in the simulation which created the trajectory and it can not figure it out on its own.</li>
</ul>
<p>If you need a single PDB file at a certain point in a run, this program could be a sledge-hammer to kill a mosquito. Use the program <a class="el" href="classextract__snapshot.html" title="Extracting a snapshot configuration.">extract_snapshot</a> instead.</p>
<dl class="note"><dt><b>Note:</b></dt><dd>Although this program reads a settings file, it only cares about instructions about Observables in the settings file. To interpret the contents of the binary "conf..." files (dereferenced in the "traj" file), it uses the header section of that file or information written in a "conf.info" file in the same directory as the conf file. In other words, whatever you write in the settings file about number of chains and sequences has no effect on this program.</dd></dl>
<h2><a class="anchor" id="usage">
Usage</a></h2>
<h3><a class="anchor" id="usage1">
Re-generating run-time information with new Observables</a></h3>
<p>Situation: you have a finished run of some system. While analysing the data you realize, you want to analyze the correlation of some new observables which you did not think of when you did the run. For instance, in a two chain run, you notice all minimum energy PDB files showing the chains either both folded or both unfolded. You want a scatter plot with the radius of gyration of each individual chain to see how they correlate, and perhaps to filter the scatter plot based on values of other observables. But radius of gyration of the individual chains was not in your settings file when you started the run. You can use <a class="el" href="classextract__props.html" title="Calculating run-time properties from traj files.">extract_props</a> to retrieve the missing information. The two lines you would need in the settings file for the two missing Rg observables are:</p>
<div class="fragment"><pre class="fragment">
new_obs Rg rg0 of_chain 0
new_obs Rg rg1 of_chain 1
</pre></div><p>After adding these lines (or any other observable related lines), run one of the following: </p>
<div class="fragment"><pre class="fragment">
$ extract_props -op tmp_ -rt n0/traj
$ extract_props -op tmp_ -rt -avg n0/traj
</pre></div><p> The first example above generates the run time history file ("rt") from the trajectory file n0/traj. The newly generated rt file will have an <em>output_prefix</em> "tmp_", i.e., it will be called "tmp_rt". A file called "tmp_rtkey" will have information about which columns contain the new observables.The entire range of MC sweeps available inside the traj file will be used. The second example creates an rt file as well as an averages file from the data described in the traj file. The averages file will be called "tmp_averages". To create histograms of the new observables, you will need to use the program prf_his1d (see <a class="el" href="prf_his1d.html">Creating PROFASI style histograms with prf_his1d</a>).</p>
<h3><a class="anchor" id="usage2">
Generating a sequence of PDB snapshots from a run</a></h3>
<div class="fragment"><pre class="fragment">
$ extract_props -op tmp_ -pdb -sf -a 4589999 -z 4600999 --every 10 n0/traj
</pre></div><p>This extracts the structure of the population at cycles starting from 4589999 until 4600999 using every 10th available snapshot. The structures in pdb format are stored in a single file (because of "-sf") called "tmp_frames.pdb". Different snapshots in the PDB file will be given different MODEL tags.</p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="classextract__snapshot.html" title="Extracting a snapshot configuration.">extract_snapshot</a>, <a class="el" href="settings_obs.html">Commands for setting up measurements/Observables</a> </dd></dl>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>app/extract_props.hh</li>
<li>app/extract_props.cc</li>
</ul>
</div>
<center>
<hr>
<small>
<strong>PROFASI: Protein Folding and Aggregation Simulator, Version 1.5 
</strong><br />
&copy; (2005-2009) <a href="http://www.thep.lu.se/~anders">Anders Irb&auml;ck</a>
and <a href="http://www.thep.lu.se/~sandipan">Sandipan Mohanty</a><br />
Documentation generated on 19 Jun 2014 using Doxygen version 1.6.1
</small>
</center>

</body>
</html> 
