<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>PROFASI: prf::RandomNumberBase Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="namespaceprf.html">prf</a>::<a class="el" href="classprf_1_1RandomNumberBase.html">RandomNumberBase</a>
  </div>
</div>
<div class="contents">
<h1>prf::RandomNumberBase Class Reference</h1><!-- doxytag: class="prf::RandomNumberBase" -->
<p>Base class for Random number generators for use in PROFASI.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;RandomNumberBase.hh&gt;</code></p>

<p>Inherited by <a class="el" href="classprf_1_1MersenneTwister.html">prf::MersenneTwister</a>, and <a class="el" href="classprf_1_1Ran3nEngine.html">prf::Ran3nEngine</a>.</p>

<p><a href="classprf_1_1RandomNumberBase-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a24ced24357d346c1b974eb21c2953568"></a><!-- doxytag: member="prf::RandomNumberBase::createSeed" ref="a24ced24357d346c1b974eb21c2953568" args="(int inpseed)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprf_1_1RandomNumberBase.html#a24ced24357d346c1b974eb21c2953568">createSeed</a> (int inpseed)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Generate a seed from process id, time ... <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aced0f58113bf096bae1340af89a89bf2"></a><!-- doxytag: member="prf::RandomNumberBase::shoot" ref="aced0f58113bf096bae1340af89a89bf2" args="()" -->
virtual double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprf_1_1RandomNumberBase.html#aced0f58113bf096bae1340af89a89bf2">shoot</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Generates a random number distributed uniformly between 0 and 1. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6b32b68492b8176b67fbc06106004b0f"></a><!-- doxytag: member="prf::RandomNumberBase::shoot" ref="a6b32b68492b8176b67fbc06106004b0f" args="(double a, double b)" -->
double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprf_1_1RandomNumberBase.html#a6b32b68492b8176b67fbc06106004b0f">shoot</a> (double a, double b)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">As above, but between a and b. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a20bf0da8f075a19e3de09636ef43d228"></a><!-- doxytag: member="prf::RandomNumberBase::shoot" ref="a20bf0da8f075a19e3de09636ef43d228" args="(double width)" -->
double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprf_1_1RandomNumberBase.html#a20bf0da8f075a19e3de09636ef43d228">shoot</a> (double width)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Between 0 and width. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a484800d9398b57cacbd4061ccda0f01c"></a><!-- doxytag: member="prf::RandomNumberBase::shootBit" ref="a484800d9398b57cacbd4061ccda0f01c" args="()" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprf_1_1RandomNumberBase.html#a484800d9398b57cacbd4061ccda0f01c">shootBit</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a random bit, 0 or 1 with equal probabilities. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af95f4213080392721d545902be155e00"></a><!-- doxytag: member="prf::RandomNumberBase::WriteTo" ref="af95f4213080392721d545902be155e00" args="(FILE *cnfil)" -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprf_1_1RandomNumberBase.html#af95f4213080392721d545902be155e00">WriteTo</a> (FILE *cnfil)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Write to a file. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9769ca6315108fcd803256a15eb60929"></a><!-- doxytag: member="prf::RandomNumberBase::ReadFrom" ref="a9769ca6315108fcd803256a15eb60929" args="(FILE *cnfil)" -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprf_1_1RandomNumberBase.html#a9769ca6315108fcd803256a15eb60929">ReadFrom</a> (FILE *cnfil)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read in the state of the generator from a file. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a10ec283e055d662da5d1ecc25d584e5c"></a><!-- doxytag: member="prf::RandomNumberBase::WriteTo_text" ref="a10ec283e055d662da5d1ecc25d584e5c" args="(FILE *cnfil)" -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprf_1_1RandomNumberBase.html#a10ec283e055d662da5d1ecc25d584e5c">WriteTo_text</a> (FILE *cnfil)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Write to a file in text form. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6a34b37aa9de6e30a02aedc88ea8a380"></a><!-- doxytag: member="prf::RandomNumberBase::ReadFrom_text" ref="a6a34b37aa9de6e30a02aedc88ea8a380" args="(FILE *cnfil)" -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprf_1_1RandomNumberBase.html#a6a34b37aa9de6e30a02aedc88ea8a380">ReadFrom_text</a> (FILE *cnfil)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read in the state of the generator from a file in text form. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprf_1_1RandomNumberBase.html#a5705b2f4bde33d4ec7d5cbe45133a7c0">RandomizeState</a> (int irnk=0)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Randomize State based on a given "rank".  <a href="#a5705b2f4bde33d4ec7d5cbe45133a7c0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab1a713fc26eadc34d8a2d1fd46e98f24"></a><!-- doxytag: member="prf::RandomNumberBase::ResetDefaultState" ref="ab1a713fc26eadc34d8a2d1fd46e98f24" args="(long seedd)" -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprf_1_1RandomNumberBase.html#ab1a713fc26eadc34d8a2d1fd46e98f24">ResetDefaultState</a> (long seedd)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize with a given seed. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprf_1_1RandomNumberBase.html#a2145bf85f11eda6595d35710dda91775">retrace</a> (std::string sttfile=&quot;&quot;)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><a class="el" href="classRetrace.html" title="A program to retrace the path of an individual replica of parallel tempering.">Retrace</a> history.  <a href="#a2145bf85f11eda6595d35710dda91775"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="add07f281f2f7b37910710e31fa28b663"></a><!-- doxytag: member="prf::RandomNumberBase::set_seed_and_ncalls" ref="add07f281f2f7b37910710e31fa28b663" args="(long sd, unsigned long ncl)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprf_1_1RandomNumberBase.html#add07f281f2f7b37910710e31fa28b663">set_seed_and_ncalls</a> (long sd, unsigned long ncl)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set seed and num_calls (to later call retrace). <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad7b334d18fc265d308ff81c4a1ecc348"></a><!-- doxytag: member="prf::RandomNumberBase::num_calls" ref="ad7b334d18fc265d308ff81c4a1ecc348" args="()" -->
unsigned long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprf_1_1RandomNumberBase.html#ad7b334d18fc265d308ff81c4a1ecc348">num_calls</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Retrieve number of calls. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1ed01eaa91ae00cb0e153ebbd172ebcd"></a><!-- doxytag: member="prf::RandomNumberBase::setSeed" ref="a1ed01eaa91ae00cb0e153ebbd172ebcd" args="(long i)" -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprf_1_1RandomNumberBase.html#a1ed01eaa91ae00cb0e153ebbd172ebcd">setSeed</a> (long i)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sets seed and Initializes with it. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprf_1_1RandomNumberBase.html#a8c838237baddba3564dc45ea0044aba9">Seed</a> () const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the seed.  <a href="#a8c838237baddba3564dc45ea0044aba9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprf_1_1RandomNumberBase.html#aa8de2bd6e56f72312e15a97806637a93">saveState</a> (std::string sttfile)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Save complete state for faster recovery.  <a href="#aa8de2bd6e56f72312e15a97806637a93"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprf_1_1RandomNumberBase.html#a836e91babb083704a1976d1d5911157f">recoverState</a> (std::string sttfile)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Recover complete state from file.  <a href="#a836e91babb083704a1976d1d5911157f"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>It is easy to change the random number generator in PROFASI. Any new random number algorithm can be implemented as a class, and for use with PROFASI, that class has to inherit from <a class="el" href="classprf_1_1RandomNumberBase.html" title="Base class for Random number generators for use in PROFASI.">RandomNumberBase</a>. </p>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a5705b2f4bde33d4ec7d5cbe45133a7c0"></a><!-- doxytag: member="prf::RandomNumberBase::RandomizeState" ref="a5705b2f4bde33d4ec7d5cbe45133a7c0" args="(int irnk=0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RandomNumberBase::RandomizeState </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>irnk</em> = <code>0</code></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This could be used to make sure that different ranks in a parallel run start with different random number states. </p>

</div>
</div>
<a class="anchor" id="a836e91babb083704a1976d1d5911157f"></a><!-- doxytag: member="prf::RandomNumberBase::recoverState" ref="a836e91babb083704a1976d1d5911157f" args="(std::string sttfile)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int RandomNumberBase::recoverState </td>
          <td>(</td>
          <td class="paramtype">std::string&nbsp;</td>
          <td class="paramname"> <em>sttfile</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Check if the given file has a state stored by a random number generator object with the same name. Check if the original seed written in the file matches with what is already stored. Check if the saved state in the file is in the past relative to the number of calls. If all checks pass, read in the state from the file, and if necessary, retrace the remaining number of random number generations to fast forward the ncalls to the required number. </p>

<p>Reimplemented in <a class="el" href="classprf_1_1MersenneTwister.html#ab4f20da30b0f747e262da1bb18a3138e">prf::MersenneTwister</a>.</p>

</div>
</div>
<a class="anchor" id="a2145bf85f11eda6595d35710dda91775"></a><!-- doxytag: member="prf::RandomNumberBase::retrace" ref="a2145bf85f11eda6595d35710dda91775" args="(std::string sttfile=&quot;&quot;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RandomNumberBase::retrace </td>
          <td>(</td>
          <td class="paramtype">std::string&nbsp;</td>
          <td class="paramname"> <em>sttfile</em> = <code>&quot;&quot;</code></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Each random number object has a "seed" from which it starts calculating. Every time a random number is generated, a counter is incremented, so that at all times, the number of calls to the random number generator since the beginning is known. These two numbers can be used to restore the random number generator to a particular state. This function causes the random number generator to first set its seed to what it knew for a seed, and then retrace all its history by regenerating an equal number of random numbers. With this function, one can save only two numbers in the configuration files for a random number generator, and restore the state as required. This restoration procedure is somewhat slower, but it is much better from the point of view of disk-space in configuration files. So, from PROFASI version 1.1, this will be the default way of saving and restoring states of a random number generator. </p>

</div>
</div>
<a class="anchor" id="aa8de2bd6e56f72312e15a97806637a93"></a><!-- doxytag: member="prf::RandomNumberBase::saveState" ref="aa8de2bd6e56f72312e15a97806637a93" args="(std::string sttfile)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RandomNumberBase::saveState </td>
          <td>(</td>
          <td class="paramtype">std::string&nbsp;</td>
          <td class="paramname"> <em>sttfile</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>As runs get longer and longer, one can not afford to lose the first 15 minutes to restoring the random number generators to the state at the end of the previous run. Especially if the runs are limited to 6 or 12 hours each time, on some supercomputer.</p>
<p>Therefore, as a compromise between disk usage and restart speed, a random number generator class in PROFASI will, from version 1.4, implement a <a class="el" href="classprf_1_1RandomNumberBase.html#aa8de2bd6e56f72312e15a97806637a93" title="Save complete state for faster recovery.">saveState()</a> function. This function will store in a text file all internal state variables of the generator. This function is meant to be called at the end of each small run, so that the disk usage is not a concern. But this will ensure instant restart, if the run is to resume from the end of a previous run.</p>
<p>The format of data in the state files must contain the name of the random number generator, the regular information like the initial seed and the number of calls. The content of the files after this point could be specific to the random number generator class. </p>

<p>Reimplemented in <a class="el" href="classprf_1_1MersenneTwister.html#a4925e0c4c4f39c1396c608b183757213">prf::MersenneTwister</a>.</p>

</div>
</div>
<a class="anchor" id="a8c838237baddba3564dc45ea0044aba9"></a><!-- doxytag: member="prf::RandomNumberBase::Seed" ref="a8c838237baddba3564dc45ea0044aba9" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long prf::RandomNumberBase::Seed </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Note that this is not necessarily the "current seed". For some random number generators, it may be possible to capture the entire state conveniently with a seed, but it is not assumed here for all random number generators. The seed here only makes sure that different seeds mean different sets of generated values. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>model/Aux/RandomNumberBase.hh</li>
<li>model/Aux/RandomNumberBase.cc</li>
</ul>
</div>
<center>
<hr>
<small>
<strong>PROFASI: Protein Folding and Aggregation Simulator, Version 1.5 
</strong><br />
&copy; (2005-2009) <a href="http://www.thep.lu.se/~anders">Anders Irb&auml;ck</a>
and <a href="http://www.thep.lu.se/~sandipan">Sandipan Mohanty</a><br />
Documentation generated on 19 Jun 2014 using Doxygen version 1.6.1
</small>
</center>

</body>
</html> 
